<!DOCTYPE html><!--[if lte IE 8]>
<html lang="en" class="lte-ie8">
<![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<!--<![endif]--><head><meta charset="utf-8"><title>May 30, 2015</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/diary/styles/global.css"><link rel="stylesheet" href="/diary/styles/tomorrow.css"><link rel="stylesheet" href="/diary/styles/diary.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-63818301-1', 'auto');
ga('send', 'pageview');</script></head><body><header class="header"><div class="index"><a href="/diary/">Index</a></div><h1>May 30, 2015</h1></header><div class="content"><div class="diary"><h2 id="angular">Angular</h2>
<h3 id="track-by">track-by</h3>
<ul>
<li><a href="http://www.bennadel.com/blog/2556-using-track-by-with-ngrepeat-in-angularjs-1-2.htm">Using Track-By With ngRepeat In AngularJS 1.2</a></li>
<li><a href="http://www.codelord.net/2014/04/15/improving-ng-repeat-performance-with-track-by/">Improving ng-repeat Performance with “track by”n</a></li>
</ul>
<p>So without track-by, angular will link your objects and the DOM by using a generated hash(<code>$$hashKey</code>). If one of them changes, the hash will be regenerated. If you use track-by to explicitly specifies what can be used as identifiers(in the collection for <code>ng-repeat</code>), then angular will just use that identifier, therefore improve the performance significantly.</p>
<h2 id="git">Git</h2>
<h3 id="-announcing-gittorrent-a-decentralized-github-http-blog-printf-net-articles-2015-05-29-announcing-gittorrent-a-decentralized-github-"><a href="http://blog.printf.net/articles/2015/05/29/announcing-gittorrent-a-decentralized-github/">Announcing GitTorrent: A Decentralized GitHub</a></h3>
<blockquote>
<p>Isn’t Git already decentralized?</p>
<p>I don’t think so, and to explain why I’d like you to imagine someone arguing that we can do without BitTorrent because we have FTP.</p>
</blockquote>
<ol>
<li><p>Get the hash(connect to GitHub):</p>
<pre><code class="lang-bash">git <span class="hljs-built_in">clone</span> gittorrent://github.com/cjb/recursers
</code></pre>
<p>And GitHub will return a hash for the latest commit</p>
</li>
<li>Fetch the repo. This is done by using BitTorrent protocol. There is a distributed hash table in the GitTorrent network.</li>
<li>Smart protocol: a BitTorrent extension, negotiate packed commits on the git graph. The remote node will make a packfile for a commit and its parents, tell you the hash, then you can get the packfile from it and any other nodes seeding it.</li>
<li><p>To avoid the initial connection to GitHub, you can distribute your repo by giving others a hash instead of a GitHub URL, so the cloning looks like:</p>
<pre><code class="lang-bash">git <span class="hljs-built_in">clone</span> gittorrent://<span class="hljs-number">81</span>e24205d4bac8496d3e13282c90ead5045f09ea/recursers
</code></pre>
<p>Then the clients will use the DHT to find out what is the latest version of this repo, and ask for that commit.</p>
<p>This is made possible by using a BitTorrent extension that allows the nodes to maintain a network-wide key-value store.</p>
</li>
<li><p>To avoid the long, impossible-to-remember hashed username, GitTorrent borrows the idea from BitCoin’s BlockChain. A mechanism of distributed consensus will verify a user&#39;s identity. So the cloning now looks like:</p>
<pre><code class="lang-bash">git <span class="hljs-built_in">clone</span> gittorrent://cjb/foo
</code></pre>
</li>
</ol>
<p>The repo is <a href="https://github.com/cjb/gittorrent">cjb/gittorrent</a>.</p>
<h2 id="service-worker">Service worker</h2>
<h3 id="-introduction-to-service-worker-http-www-html5rocks-com-en-tutorials-service-worker-introduction-"><a href="http://www.html5rocks.com/en/tutorials/service-worker/introduction/">Introduction to Service Worker</a></h3>
<ul>
<li>For tasks that don&#39;t need a web page<ul>
<li>e.g. push notification, background tasks</li>
</ul>
</li>
<li>Can&#39;t access the DOM(coz it&#39;s a worker!), uses the <code>postMessage</code> interface.</li>
<li>Its lifetime is not controlled by the developer, persistent state could be stored in indexDB.</li>
<li>Promises!</li>
<li>It needs HTTPS(or localhost when in development)</li>
<li>Register -&gt; install -&gt; activation -&gt; idle -&gt; fetch/message -&gt; terminated(usually because the memory runs out)</li>
</ul>
<h4 id="register">Register</h4>
<pre><code class="lang-javascript"><span class="hljs-keyword">if</span> (<span class="hljs-string">'serviceWorker'</span> <span class="hljs-keyword">in</span> navigator) {
  navigator.serviceWorker.register(<span class="hljs-string">'/sw.js'</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">registration</span>) </span>{
    <span class="hljs-comment">// Registration was successful</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ServiceWorker registration successful with scope: '</span>,    registration.scope);
  }).catch(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err</span>) </span>{
    <span class="hljs-comment">// registration failed :(</span>
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'ServiceWorker registration failed: '</span>, err);
  });
}
</code></pre>
<ul>
<li>The browser will make sure it won&#39;t be registered repeatedly</li>
</ul>
<p>...To be continued.</p>
<h2 id="web-components">Web Components</h2>
<h3 id="-let-s-build-some-apps-with-polymer-chrome-dev-summit-2014-rob-dodson-https-www-youtube-com-watch-v-kv0hgdmph28-"><a href="https://www.youtube.com/watch?v=kV0hgdMpH28">Let’s build some apps with Polymer! - Chrome Dev Summit 2014 (Rob Dodson)</a></h3>
<p>GitHub repo: <a href="https://github.com/robdodson/contacts-app">robdodson/contacts-app</a></p>
<h4 id="structure">Structure</h4>
<ul>
<li><code>&lt;div&gt;</code>s!</li>
<li><code>&lt;core-toolbar&gt;</code> inside <code>&lt;core-header-panel&gt;</code> or <code>&lt;core-scroll-header-panel&gt;</code></li>
<li><code>&lt;paper-menu-button&gt;</code>, <code>&lt;paper-icon-button&gt;</code>, <code>&lt;paper-dropdown&gt;</code><ul>
<li><code>&lt;core-menu&gt;</code> with <code>&lt;paper-item&gt;</code>s</li>
</ul>
</li>
<li><code>icon</code> for icons, <code>flex</code> just like css flex, <code>condenss</code> give you a cross-fade effect</li>
<li>Responsive <code>&lt;core-drawer-panel&gt;</code> with <code>drawer</code> and <code>main</code></li>
<li><code>&lt;core-list&gt;</code> is lazy with <code>&lt;templates&gt;</code> materialized by <code>{{ model }}</code>s</li>
<li><code>&lt;core-image&gt;</code> can be <code>preload</code>ed</li>
<li><code>&lt;core-list scrollTarget=&quot;{{$.coreHeaderPanelId.scroller}}&quot;</code> to make it work</li>
<li><code>&lt;core-animated-pages&gt;</code> with <code>&lt;sections&gt;</code> and <code>transitions</code> for them</li>
</ul>
<h4 id="transition">Transition</h4>
<ol>
<li>The JavaScript way: change the <code>pages.selected</code> on route change<ul>
<li>Lazy load with <code>Polymer.import</code></li>
</ul>
</li>
<li>The markup way<ul>
<li><code>&lt;app-router&gt;</code></li>
</ul>
</li>
</ol>
<h4 id="performance">Performance</h4>
<ul>
<li>Check native WC support before using polyfills</li>
<li>vulcanize your components into one file so you can gzip them</li>
</ul>
<h4 id="offline">Offline</h4>
<ul>
<li>Use ServiceWorker to cache it offline</li>
</ul>
<h2 id="design">Design</h2>
<ul>
<li><a href="https://www.google.com/design/videos/making-material-design/">Making Material Design Making Material Design</a></li>
<li><a href="https://www.youtube.com/watch?v=6WxACOHm0_g">Refining roboto</a></li>
<li><a href="https://www.youtube.com/watch?v=xYkz0Ueg0L4">Palette perfect</a></li>
</ul>
<h2 id="web-audio">Web Audio</h2>
<ul>
<li><a href="https://dev.opera.com/articles/drum-sounds-webaudio/">Synthesising Drum Sounds with the Web Audio API</a></li>
<li><a href="http://blogs.windows.com/msedgedev/2015/05/26/announcing-dolby-audio-for-high-performance-audio-in-microsoft-edge/">Announcing Dolby Audio for high performance audio in Microsoft Edge</a></li>
</ul>
</div></div><footer class="footer"><address class="author">Copyright &copy;<a rel="author" href="https://github.com/joyeecheung" class="author-name">Joyee Cheung</a>-<a href="https://github.com/joyeecheung/my-tech-diary" class="source-repo">Source</a></address><p>Generated by<a href="https://github.com/joyeecheung/diary" class="site-repo">Joyee Cheung&#39;s diary generator</a></p></footer></body></html>