<!DOCTYPE html><!--[if lte IE 8]>
<html lang="en" class="lte-ie8">
<![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<!--<![endif]--><head><meta charset="utf-8"><title>December 16, 2015</title><meta name="viewport" content="width=device-width, initial-scale=1.0"><link rel="stylesheet" href="/diary/styles/global.css"><link rel="stylesheet" href="/diary/styles/tomorrow.css"><link rel="stylesheet" href="/diary/styles/diary.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-63818301-1', 'auto');
ga('send', 'pageview');</script></head><body><header class="header"><div class="index"><a href="/diary/">Index</a></div><h1>December 16, 2015</h1></header><div class="content"><div class="diary"><h2 id="frontend">Frontend</h2>
<h3 id="-mixins-are-dead-long-live-composition-https-medium-com-dan_abramov-mixins-are-dead-long-live-higher-order-components-94a0d2f9e750-gb3non5zo-"><a href="https://medium.com/@dan_abramov/mixins-are-dead-long-live-higher-order-components-94a0d2f9e750#.gb3non5zo">Mixins Are Dead. Long Live Composition</a></h3>
<h4 id="-utility-functions-"><strong>Utility functions</strong></h4>
<p>Put them in <strong>modules</strong></p>
<h4 id="-lifecycle-hooks-and-state-providers-"><strong>Lifecycle Hooks</strong> and <strong>State Providers</strong></h4>
<ul>
<li>Why mixins doesn&#39;t help<ul>
<li>They are, in fact, a form of <strong>implicit definition</strong></li>
<li>Conflicts of names</li>
<li>They tend to add more state to your component, but you should&#39;ve strive for less</li>
<li>Complicate performance optimizations(how to merge <code>shouldComponentUpdate</code>?)</li>
</ul>
</li>
<li><p>A higher-order component is just <strong>a function</strong> that takes an existing component and returns another component that wraps it.</p>
<p>The key is:</p>
<pre><code class="lang-javascript"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">connectToStores</span>(<span class="hljs-params">Component, stores, getStateFromStores</span>) </span>{
  <span class="hljs-keyword">let</span> StoreConnection = React.createClass({
    <span class="hljs-comment">// lifecycle hooks can use getStateFromStores</span>
    render() {
        <span class="hljs-keyword">return</span> <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">Component</span> {<span class="hljs-attribute">...this.props</span>} {<span class="hljs-attribute">...this.state</span>} /&gt;</span>;</span>
    }
  });
  <span class="hljs-keyword">return</span> StoreConnection;
};
</code></pre>
</li>
<li><p>This way wrapperâ€™s lifecycle hooks work without any special merging behavior</p>
<pre><code class="lang-javascript">ProfilePage = connectToStores(ProfilePage, [UserStore], props =&gt; ({
  user: UserStore.get(props.userId)
});
</code></pre>
</li>
<li>limitations<ul>
<li><code>PureRenderMixin</code> -&gt; use <code>PureComponent</code>, implements <code>shouldComponentUpdate</code> (and inheritance)</li>
<li>Use callback ref <code>ref={this.props.someRef}</code> to notify the higher-order component about attaching and detaching DOM nodes</li>
</ul>
</li>
<li><a href="https://github.com/gaearon/flux-react-router-example/">flux-react-router-example</a></li>
</ul>
<h3 id="-rebuilding-hipchat-with-react-js-https-developer-atlassian-com-blog-2015-02-rebuilding-hipchat-with-react-"><a href="https://developer.atlassian.com/blog/2015/02/rebuilding-hipchat-with-react/">Rebuilding HipChat with React.js</a></h3>
<ul>
<li>Rewrite from jQuery to React &amp; Flux</li>
<li>Why React<ul>
<li>Component based</li>
<li>Declarative</li>
<li>Virtual DOM</li>
<li>Small, Simple<ul>
<li>you can memorize the API in a day</li>
<li>You can build components with confidence that it&#39;ll just work once you&#39;ve built the first one</li>
</ul>
</li>
<li>Unidirectional flow - you know exactly where your data is mutating</li>
<li>Testable</li>
</ul>
</li>
</ul>
</div></div><footer class="footer"><address class="author">Copyright &copy;<a rel="author" href="https://github.com/joyeecheung" class="author-name">Joyee Cheung</a>-<a href="https://github.com/joyeecheung/my-tech-diary" class="source-repo">Source</a></address><p>Generated by<a href="https://github.com/joyeecheung/diary" class="site-repo">Joyee Cheung&#39;s diary generator</a></p></footer></body></html>